{% extends 'blogyapp/base.html' %}
{% load bootstrap5 %}
{% bootstrap_css %}
{% bootstrap_javascript %}
{% load read-time %}

{% block content %}


<head>
  <style>
    @font-face {
        font-family: "poppins";
        src: url('../static/blogyapp/fonts/poppins/Poppins-Regular.otf');
    }
    p, h1, h2, h3, h4, h5, h6, button, a{
        font-family:poppins !important;
        color: #444444 ;
    }
  </style>
</head>


    <div class="container-fluid" style="width: 95%;">  
  <br>
 
  <h4 style="font-weight: 600;margin-top: 0.2cm;margin-bottom: 25px;color: rgb(17, 17, 17);"> 
    <svg xmlns="http://www.w3.org/2000/svg" width="23" height="23" fill="currentColor" class="bi bi-journal-text" viewBox="0 0 16 16">
      <path d="M5 10.5a.5.5 0 0 1 .5-.5h2a.5.5 0 0 1 0 1h-2a.5.5 0 0 1-.5-.5zm0-2a.5.5 0 0 1 .5-.5h5a.5.5 0 0 1 0 1h-5a.5.5 0 0 1-.5-.5zm0-2a.5.5 0 0 1 .5-.5h5a.5.5 0 0 1 0 1h-5a.5.5 0 0 1-.5-.5zm0-2a.5.5 0 0 1 .5-.5h5a.5.5 0 0 1 0 1h-5a.5.5 0 0 1-.5-.5z"/>
      <path d="M3 0h10a2 2 0 0 1 2 2v12a2 2 0 0 1-2 2H3a2 2 0 0 1-2-2v-1h1v1a1 1 0 0 0 1 1h10a1 1 0 0 0 1-1V2a1 1 0 0 0-1-1H3a1 1 0 0 0-1 1v1H1V2a2 2 0 0 1 2-2z"/>
      <path d="M1 5v-.5a.5.5 0 0 1 1 0V5h.5a.5.5 0 0 1 0 1h-2a.5.5 0 0 1 0-1H1zm0 3v-.5a.5.5 0 0 1 1 0V8h.5a.5.5 0 0 1 0 1h-2a.5.5 0 0 1 0-1H1zm0 3v-.5a.5.5 0 0 1 1 0v.5h.5a.5.5 0 0 1 0 1h-2a.5.5 0 0 1 0-1H1z"/>
    </svg>&nbsp;
    My Articles 
    <span style="font-size: 1.1rem;color:gray"> ( {{entries.count}} ) </span> 
   </h4>

      <div class="tools" style="display: flex;margin-bottom: 20px;"> 
        <div class="dropdown">
          <button class="btn btn-light dropdown-toggle btn-sm" type="button" id="dropdownMenuButton2" data-bs-toggle="dropdown" aria-expanded="false">
            <svg xmlns="http://www.w3.org/2000/svg" width="19" height="19" fill="currentColor" class="bi bi-funnel" viewBox="0 0 16 16">
              <path d="M1.5 1.5A.5.5 0 0 1 2 1h12a.5.5 0 0 1 .5.5v2a.5.5 0 0 1-.128.334L10 8.692V13.5a.5.5 0 0 1-.342.474l-3 1A.5.5 0 0 1 6 14.5V8.692L1.628 3.834A.5.5 0 0 1 1.5 3.5v-2zm1 .5v1.308l4.372 4.858A.5.5 0 0 1 7 8.5v5.306l2-.666V8.5a.5.5 0 0 1 .128-.334L13.5 3.308V2h-11z"/>
            </svg>  Filter Articles
          </button>
          <ul class="dropdown-menu dropdown-menu-light" aria-labelledby="dropdownMenuButton2" style="width: 200px;">
            
       

            <li> 
              
              <form action="" method='post'>
                {% csrf_token %}   
                <div style="margin-left: 0.2cm;">  

                  <div>   
                    <button style= "color: #051622;" href="#" class="btn btn-light btn-sm"  name="all"> All Articles </button> 
                   </div>

                  <div>   
                 <button style= "color: #051622;" href="#" class="btn btn-light btn-sm"  name="unpublished"> Unpublished Articles </button> 
                </div>

                <div> 
                   <button style= "color: #051622;" href="#" class="btn btn-light btn-sm " name="published"> Published Articles </button>  
                  </div>


                </div>
              </form>

            </li>

            
           
          </ul>
        </div>
        &nbsp;&nbsp;
        <div class="dropdown">
          <button class="btn btn-light dropdown-toggle btn-sm" type="button" id="dropdownMenuButton2" data-bs-toggle="dropdown" aria-expanded="false">
            <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" fill="currentColor" class="bi bi-sort-down" viewBox="0 0 16 16">
              <path d="M3.5 2.5a.5.5 0 0 0-1 0v8.793l-1.146-1.147a.5.5 0 0 0-.708.708l2 1.999.007.007a.497.497 0 0 0 .7-.006l2-2a.5.5 0 0 0-.707-.708L3.5 11.293V2.5zm3.5 1a.5.5 0 0 1 .5-.5h7a.5.5 0 0 1 0 1h-7a.5.5 0 0 1-.5-.5zM7.5 6a.5.5 0 0 0 0 1h5a.5.5 0 0 0 0-1h-5zm0 3a.5.5 0 0 0 0 1h3a.5.5 0 0 0 0-1h-3zm0 3a.5.5 0 0 0 0 1h1a.5.5 0 0 0 0-1h-1z"/>
            </svg>  Sort Articles
          </button>
          <ul class="dropdown-menu dropdown-menu-light" aria-labelledby="dropdownMenuButton2">
            
       
            <li style="margin-left: 0.4cm;"> Sort by :</li>
            <hr style="color: black; margin-bottom:0.2cm; margin-top:0.2cm">
            <li> 
              
              <form action="" method='post'>
                {% csrf_token %}   
                <div style="margin-left: 0.2cm;">  

                  <div>   
                    <button style= "color: #051622;font-weight: 600;" href="#" class="btn btn-light btn-sm"  name="namedown"> 
                      Article Title <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" fill="currentColor" class="bi bi-sort-alpha-down" viewBox="0 0 16 16">
                        <path fill-rule="evenodd" d="M10.082 5.629 9.664 7H8.598l1.789-5.332h1.234L13.402 7h-1.12l-.419-1.371h-1.781zm1.57-.785L11 2.687h-.047l-.652 2.157h1.351z"/>
                        <path d="M12.96 14H9.028v-.691l2.579-3.72v-.054H9.098v-.867h3.785v.691l-2.567 3.72v.054h2.645V14zM4.5 2.5a.5.5 0 0 0-1 0v9.793l-1.146-1.147a.5.5 0 0 0-.708.708l2 1.999.007.007a.497.497 0 0 0 .7-.006l2-2a.5.5 0 0 0-.707-.708L4.5 12.293V2.5z"/>
                      </svg></button> 
                   </div>

                   <div>   
                    <button style= "color: #051622;font-weight: 600;" href="#" class="btn btn-light btn-sm"  name="nameup"> 
                      Article Title <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" fill="currentColor" class="bi bi-sort-alpha-up" viewBox="0 0 16 16">
                        <path fill-rule="evenodd" d="M10.082 5.629 9.664 7H8.598l1.789-5.332h1.234L13.402 7h-1.12l-.419-1.371h-1.781zm1.57-.785L11 2.687h-.047l-.652 2.157h1.351z"/>
                        <path d="M12.96 14H9.028v-.691l2.579-3.72v-.054H9.098v-.867h3.785v.691l-2.567 3.72v.054h2.645V14zm-8.46-.5a.5.5 0 0 1-1 0V3.707L2.354 4.854a.5.5 0 1 1-.708-.708l2-1.999.007-.007a.498.498 0 0 1 .7.006l2 2a.5.5 0 1 1-.707.708L4.5 3.707V13.5z"/>
                      </svg></button> 
                   </div>

                  <div>   
                 <button style= "color: #051622;font-weight: 600;" href="#" class="btn btn-light btn-sm"  name="datedown"> 
                  Date Created <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" fill="currentColor" class="bi bi-sort-numeric-down" viewBox="0 0 16 16">
                    <path d="M12.438 1.668V7H11.39V2.684h-.051l-1.211.859v-.969l1.262-.906h1.046z"/>
                    <path fill-rule="evenodd" d="M11.36 14.098c-1.137 0-1.708-.657-1.762-1.278h1.004c.058.223.343.45.773.45.824 0 1.164-.829 1.133-1.856h-.059c-.148.39-.57.742-1.261.742-.91 0-1.72-.613-1.72-1.758 0-1.148.848-1.835 1.973-1.835 1.09 0 2.063.636 2.063 2.687 0 1.867-.723 2.848-2.145 2.848zm.062-2.735c.504 0 .933-.336.933-.972 0-.633-.398-1.008-.94-1.008-.52 0-.927.375-.927 1 0 .64.418.98.934.98z"/>
                    <path d="M4.5 2.5a.5.5 0 0 0-1 0v9.793l-1.146-1.147a.5.5 0 0 0-.708.708l2 1.999.007.007a.497.497 0 0 0 .7-.006l2-2a.5.5 0 0 0-.707-.708L4.5 12.293V2.5z"/>
                  </svg> </button> 
                </div>

                <div> 
                   <button style= "color: #051622;font-weight: 600;" href="#" class="btn btn-light btn-sm " name="dateup"> 
                    Date Created <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" fill="currentColor" class="bi bi-sort-numeric-up" viewBox="0 0 16 16">
                      <path d="M12.438 1.668V7H11.39V2.684h-.051l-1.211.859v-.969l1.262-.906h1.046z"/>
                      <path fill-rule="evenodd" d="M11.36 14.098c-1.137 0-1.708-.657-1.762-1.278h1.004c.058.223.343.45.773.45.824 0 1.164-.829 1.133-1.856h-.059c-.148.39-.57.742-1.261.742-.91 0-1.72-.613-1.72-1.758 0-1.148.848-1.835 1.973-1.835 1.09 0 2.063.636 2.063 2.687 0 1.867-.723 2.848-2.145 2.848zm.062-2.735c.504 0 .933-.336.933-.972 0-.633-.398-1.008-.94-1.008-.52 0-.927.375-.927 1 0 .64.418.98.934.98z"/>
                      <path d="M4.5 13.5a.5.5 0 0 1-1 0V3.707L2.354 4.854a.5.5 0 1 1-.708-.708l2-1.999.007-.007a.498.498 0 0 1 .7.006l2 2a.5.5 0 1 1-.707.708L4.5 3.707V13.5z"/>
                    </svg> </button>  
                  </div>


                </div>
              </form>

            </li>

            
           
          </ul>
        </div>
        &nbsp;&nbsp;
        <br>
        <div class = "search">
          <form class="d-flex"  action="" method="POST" >
            {% csrf_token %}   
            <input class="form-control  form-control-sm" name = "searchtext" type='text' placeholder="Search Articles" aria-label="Search">
            
            <button style="margin-left: 10px;" class="btn btn-outline-success btn-sm" type="submit" name = "search">Search</button>
          </form>
        </div>
       
      </div>

 
      <div class="row">
  
        {% for entry in entries %}
        <div class="col-md-4">
         
          <div class="card  ">
            <div  >
              <img style="width: 100%; height: 250px;" class="card-img-top" src="{{entry.thumbnail.url}}" alt="" >
            </div>
            
      
          <div class="card-body" style="height: 100px;overflow: hidden;"> 
            <div style="font-size:0.86rem;color: #696969;"> {{entry.date_added|date:"d M Y"}}</div>
            <a style="font-size: 1.4rem;color: rgb(42, 42, 42);font-weight: 600;" href="{% url 'blogyapp:read' entry.id %}">
              {{ entry.entry_title}}
            </a>
 
       
          </div>

          
     <br>
          <div class="d-flex container-fluid" >
                    
            <div class="like" style="margin-right:0.3cm"> 
         
                <form class="d-flex " action="{% url 'blogyapp:like_unlike' entry.id %}" method='post'>
                    {% csrf_token %}

                    {% if entry in entry.profile.liked_articles.all %}
               
                    <button  class="btn btn-outline-danger btn-sm position-relative" name="submit" style="border: none;" >
                      <div class="d-flex">
                        <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-heart-fill" viewBox="0 0 16 16">                                
                            <path fill-rule="evenodd" d="M8 1.314C12.438-3.248 23.534 4.735 8 15-7.534 4.736 3.562-3.248 8 1.314z"/>
                          </svg> 
                          <span style="font-weight: 500;">
                           &nbsp;&nbsp;{{entry.likes}}
                          </span>
                        </div>
                    </button>
                    {% else %}

                    <button style= "color: #051622;border: none;" class="btn btn-outline-secondary btn-sm position-relative" name="submit">
                      <div class="d-flex">  
                         <svg name="submit" xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-heart" viewBox="0 0 16 16">
                        <path d="m8 2.748-.717-.737C5.6.281 2.514.878 1.4 3.053c-.523 1.023-.641 2.5.314 4.385.92 1.815 2.834 3.989 6.286 6.357 3.452-2.368 5.365-4.542 6.286-6.357.955-1.886.838-3.362.314-4.385C13.486.878 10.4.28 8.717 2.01L8 2.748zM8 15C-7.333 4.868 3.279-3.04 7.824 1.143c.06.055.119.112.176.171a3.12 3.12 0 0 1 .176-.17C12.72-3.042 23.333 4.867 8 15z"/>
                        </svg> 
                    
                    <span style="font-weight: 500;">
                      &nbsp;&nbsp;{{entry.likes}}  
                    </span>
                  </div>
                  </button>
 
                    {% endif %}
                   
                </form>
            </div>
            
            <div class="bookmark"  style="margin-right:0.3cm">

              <form action="{% url 'blogyapp:bookmark' entry.id %}" method='post'>
                  {% csrf_token %}

                  {% if entry in entry.profile.bookmarked_articles.all %}
                  <button class="btn btn-outline-warning btn-sm position-relative" name="submit" style="border: none;">
                    <div class="d-flex">
                    <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-bookmark-plus-fill" viewBox="0 0 16 16">
                        <path fill-rule="evenodd" d="M2 15.5V2a2 2 0 0 1 2-2h8a2 2 0 0 1 2 2v13.5a.5.5 0 0 1-.74.439L8 13.069l-5.26 2.87A.5.5 0 0 1 2 15.5zm6.5-11a.5.5 0 0 0-1 0V6H6a.5.5 0 0 0 0 1h1.5v1.5a.5.5 0 0 0 1 0V7H10a.5.5 0 0 0 0-1H8.5V4.5z"/>
                    </svg> 
                      <span style="font-weight: 500;">
                      &nbsp;&nbsp;{{entry.bookmarks}}
                      </span>
                         
                    </div>
                </button>
                  {% else %}
                  <button style= "color: #051622;border: none;" class="btn btn-outline-secondary btn-sm position-relative" name="submit">
                    <div class="d-flex">
                      <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-bookmark-plus" viewBox="0 0 16 16">
                        <path d="M2 2a2 2 0 0 1 2-2h8a2 2 0 0 1 2 2v13.5a.5.5 0 0 1-.777.416L8 13.101l-5.223 2.815A.5.5 0 0 1 2 15.5V2zm2-1a1 1 0 0 0-1 1v12.566l4.723-2.482a.5.5 0 0 1 .554 0L13 14.566V2a1 1 0 0 0-1-1H4z"/>
                        <path d="M8 4a.5.5 0 0 1 .5.5V6H10a.5.5 0 0 1 0 1H8.5v1.5a.5.5 0 0 1-1 0V7H6a.5.5 0 0 1 0-1h1.5V4.5A.5.5 0 0 1 8 4z"/>
                      </svg>
                      <span  style="font-weight: 500;">
                        &nbsp;&nbsp;{{entry.bookmarks}}
                      </span>
                    </div>
                   
                </button>
                      
                  {% endif %}
                 
              </form>

            </div>

            <div  id="comments" style="margin-right:0cm">
              <a href="{% url 'blogyapp:read' entry.id %}#comments" class="btn btn-outline-secondary btn-sm position-relative" name="submit" style="border: none;">
                <div class="d-flex"> 
                <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-chat-square" viewBox="0 0 16 16">
                  <path d="M14 1a1 1 0 0 1 1 1v8a1 1 0 0 1-1 1h-2.5a2 2 0 0 0-1.6.8L8 14.333 6.1 11.8a2 2 0 0 0-1.6-.8H2a1 1 0 0 1-1-1V2a1 1 0 0 1 1-1h12zM2 0a2 2 0 0 0-2 2v8a2 2 0 0 0 2 2h2.5a1 1 0 0 1 .8.4l1.9 2.533a1 1 0 0 0 1.6 0l1.9-2.533a1 1 0 0 1 .8-.4H14a2 2 0 0 0 2-2V2a2 2 0 0 0-2-2H2z"/>
                </svg>
                  <span style="font-weight: 500;">
                   &nbsp;&nbsp;{{entry.entry.count}}
                  </span>
                </div>
                </a>
            </div>


            <div style="width: 100% !important;" class="container-fluid d-flex justify-content-end" >
              <div >
               <h6 style="font-size: 0.75rem;cursor:default;padding-left: 0px;"> {{entry.text|safe|readtime}} </h6> 
              </div>
            </div>
          
        </div>


            
            <hr>
            <center>  
            <div style="display:flexbox;margin-bottom: 20px ;" >
              <a style="text-decoration: none; " class="btn btn-primary btn-sm"  href="{% url 'blogyapp:edit_entry' entry.id %}"> Edit</a> 

              <div class="modal fade" id="exampleModal" tabindex="-1" aria-labelledby="exampleModalLabel" aria-hidden="true">
                <div class="modal-dialog">
                <div class="modal-content">
                    <div class="modal-header">
                    <h5 class="modal-title" id="exampleModalLabel"> Delete Article ?</h5>
                    <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
                    </div>
                    <div class="modal-body">
                    Your Article will be permanently deleted
                    </div><center> 
                    <div class="modal-footer" style="background-color: #1c5883;">
                    <button data-bs-dismiss="modal" type="button" class="btn btn-secondary btn-sm">Cansel</button> <a href="{% url 'blogyapp:delete_entry' entry.id %}" class="btn btn-danger btn-sm">Delete</a>      
                    </div></center>
                </div>
                </div>
            </div>
            {% if entry.uploaded is True %}
              <a class="btn btn-outline-secondary btn-sm" style="text-decoration: none;margin-left: 0.9cm;margin-right:0.9cm" href="{% url 'blogyapp:publish_or_unpublish' entry.id %}"> Unpublish</a>
             {% else %} 
              <a class="btn btn-outline-primary btn-sm" style="text-decoration: none;margin-left: 0.9cm;margin-right:0.9cm" href="{% url 'blogyapp:publish_or_unpublish' entry.id %}"> Publish</a>
            {% endif %}
            <a data-bs-toggle="modal" data-bs-target="#exampleModal" style="text-decoration: none; color:rgb(255, 47, 47)" href="#" > Delete </a>
            </div>
          </center>


         
          </div>
          <br>
          </div>
        
        {% endfor %}
      </div>

    </div>
  


{% endblock content %}
